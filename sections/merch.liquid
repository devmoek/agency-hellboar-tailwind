<main style="background: #000;display:flex;flex-direction: column;gap: 60px;">

  <!-- Our Merchandise Shop Section -->
  <section class="section" id="merchandise">
    <div class="container">
      <h2 class="section-title">{{ section.settings.merchandise_title | default: 'Our Merchandise Shop' }}</h2>
      <p class="section-subtitle">{{ section.settings.merchandise_subtitle | default: 'Discover our exclusive collection of premium merchandise' }}</p>
      
      {% if section.settings.collection != blank %}
        {% assign collection = collections[section.settings.collection] %}
        {% assign products_limit = section.settings.products_limit | default: 9 %}
        
        <div class="merchandise-grid">
          {% for product in collection.products limit: products_limit %}
            <div class="merchandise-card">
              <div class="merchandise-image">
                {% if product.featured_image %}
                  <img src="{{ product.featured_image | image_url: width: 300, height: 250 }}" 
                       alt="{{ product.title | escape }}" 
                       class="merchandise-img" 
                       width="300" 
                       height="250"
                       loading="lazy">
                {% else %}
                  <img src="https://cdn.shopify.com/s/files/1/0667/8036/4971/files/merch-placeholder.jpg?v=1749916802" 
                       alt="Product placeholder" 
                       class="merchandise-img" 
                       width="300" 
                       height="250"
                       loading="lazy">
                {% endif %}
                <div class="merchandise-overlay">
                  <span class="merchandise-category">{{ product.type | default: 'Product' }}</span>
                </div>
              </div>
              <div class="merchandise-content">
                <h3 class="merchandise-title">{{ product.title }}</h3>
                <p class="merchandise-description">{{ product.description | strip_html | truncate: 100 }}</p>
                <div class="merchandise-price">
                  {% if product.compare_at_price > product.price %}
                    <span style="text-decoration: line-through; color: #999; margin-right: 10px;">{{ product.compare_at_price | money }}</span>
                  {% endif %}
                  {{ product.price | money }}
                </div>
                <a href="{{ product.url }}" class="merchandise-button">{{ section.settings.button_text | default: 'Shop Now' }}</a>
              </div>
            </div>
          {% endfor %}
        </div>
        
        {% if section.settings.show_cta_button %}
          <div class="merchandise-cta">
            <a href="{{ collection.url }}" class="cta-button">
              {{ section.settings.cta_button_text | default: 'View All Merchandise' }}
            </a>
          </div>
        {% endif %}
      {% else %}
        <div style="text-align: center; padding: 60px 20px; color: #f2f2f2;">
          <p>Please select a collection in the theme editor to display products.</p>
        </div>
      {% endif %}
    </div>
  </section>

</main>

{% schema %}
{
  "name": "Merch",
  "settings": [
    {
      "type": "header",
      "content": "Merchandise Section"
    },
    {
      "type": "text",
      "id": "merchandise_title",
      "label": "Merchandise Section Title",
      "default": "Our Merchandise Shop"
    },
    {
      "type": "text",
      "id": "merchandise_subtitle",
      "label": "Merchandise Section Subtitle",
      "default": "Discover our exclusive collection of premium merchandise"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection",
      "info": "Select a collection to display products"
    },
    {
      "type": "range",
      "id": "products_limit",
      "label": "Number of products to show",
      "min": 3,
      "max": 12,
      "step": 3,
      "default": 9
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Product Button Text",
      "default": "Shop Now"
    },
    {
      "type": "checkbox",
      "id": "show_cta_button",
      "label": "Show CTA Button",
      "default": true
    },
    {
      "type": "text",
      "id": "cta_button_text",
      "label": "CTA Button Text",
      "default": "View All Merchandise"
    }
  ],
  "presets": [
    {
      "name": "Merch"
    }
  ]
}
{% endschema %}
